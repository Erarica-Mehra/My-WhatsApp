(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),n=c(30),i=c.n(n),r=(c(71),c(16)),o=(c(72),c(73),c(105)),j=c(101),d=c(56),l=c.n(d),h=c(57),b=c.n(h),u=c(43),m=c.n(u),O=c(58),p=c.n(O),x=(c(74),c(38)),v=x.a.initializeApp({apiKey:"AIzaSyD4bWnybZvefyJeYAaRnAzrXo8owi6QJQs",authDomain:"whatsapp-clone-248c8.firebaseapp.com",projectId:"whatsapp-clone-248c8",storageBucket:"whatsapp-clone-248c8.appspot.com",messagingSenderId:"742952072067",appId:"1:742952072067:web:a3c48e0495606427377cb6",measurementId:"G-B6GH38DBP5"}),f=v.firestore(),g=v.auth(),_=new x.a.auth.GoogleAuthProvider,N=f,S=c(34),w=c(4);var y=function(e){var t,c=e.id,s=e.name,n=e.addNewChat,i=Object(a.useState)(""),j=Object(r.a)(i,2),d=(j[0],j[1]),l=Object(a.useState)(""),h=Object(r.a)(l,2),b=h[0],u=h[1];return Object(a.useEffect)((function(){c&&N.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return u(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(a.useEffect)((function(){d(Math.floor(5e3*Math.random()))}),[]),n?Object(w.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat");e&&N.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(w.jsx)("h2",{children:"Add New Chat"})}):Object(w.jsx)(S.b,{to:"/rooms/".concat(c),children:Object(w.jsxs)("div",{className:"sidebarChat",children:[Object(w.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/${seed}.svg"}),Object(w.jsxs)("div",{className:"sidebarChat__info",children:[Object(w.jsx)("h2",{children:s}),Object(w.jsx)("p",{children:null===(t=b[0])||void 0===t?void 0:t.message})]})]})})},C=Object(a.createContext)(),I=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(w.jsx)(C.Provider,{value:Object(a.useReducer)(t,c),children:s})},k=function(){return Object(a.useContext)(C)};var D=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1],n=k(),i=Object(r.a)(n,2),d=i[0].user;return i[1],Object(a.useEffect)((function(){var e=N.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(w.jsxs)("div",{className:"sidebar",children:[Object(w.jsxs)("div",{className:"sidebar__header",children:[Object(w.jsx)(o.a,{src:null===d||void 0===d?void 0:d.photoURL}),Object(w.jsx)("div",{className:"sidebar__headerRight",children:" "}),Object(w.jsx)(j.a,{children:Object(w.jsx)(l.a,{})}),Object(w.jsx)(j.a,{children:Object(w.jsx)(b.a,{})}),Object(w.jsx)(j.a,{children:Object(w.jsx)(m.a,{})})]}),Object(w.jsx)("div",{className:"sidebar__search",children:Object(w.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(w.jsx)(p.a,{}),Object(w.jsx)("input",{placeholder:"Search or start chat",type:"text"})]})}),Object(w.jsxs)("div",{className:"sidebar_chats",children:[Object(w.jsx)(y,{addNewChat:!0}),c.map((function(e){return Object(w.jsx)(y,{id:e.id,name:e.data.name},e.id)}))]})]})},E=c(102),A=c(103),B=c(60),W=c.n(B),R=c(59),M=c.n(R),P=(c(84),c(11));var T=function(){var e,t,c=Object(a.useState)(""),s=Object(r.a)(c,2),n=s[0],i=s[1],d=Object(a.useState)(""),l=Object(r.a)(d,2),h=(l[0],l[1]),b=Object(P.f)().roomId,u=Object(a.useState)(""),O=Object(r.a)(u,2),p=O[0],v=O[1],f=Object(a.useState)([]),g=Object(r.a)(f,2),_=g[0],S=g[1],y=k(),C=Object(r.a)(y,2),I=C[0].user;return C[1],Object(a.useEffect)((function(){b&&(N.collection("rooms").doc(b).onSnapshot((function(e){v(e.data().name)})),N.collection("rooms").doc(b).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){S(e.docs.map((function(e){return e.data()})))})))}),[b]),Object(a.useEffect)((function(){h(Math.floor(5e3*Math.random()))}),[]),Object(w.jsxs)("div",{className:"chat",children:[Object(w.jsxs)("div",{className:"chat__header",children:[Object(w.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/${seed}.svg"}),Object(w.jsxs)("div",{className:"chat__headerInfo",children:[Object(w.jsx)("h3",{children:p}),Object(w.jsxs)("p",{children:["Last Seen at ..",new Date(null===(e=_[_.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(w.jsxs)("div",{className:"chat__headerRight",children:[Object(w.jsx)(j.a,{children:Object(w.jsx)(E.a,{})}),Object(w.jsx)(j.a,{children:Object(w.jsx)(A.a,{})}),Object(w.jsx)(j.a,{children:Object(w.jsx)(m.a,{})})]})]}),Object(w.jsx)("div",{className:"chat__body",children:_.map((function(e){var t;return Object(w.jsxs)("p",{className:"chat__message  ".concat(e.name===I.displayName&&"chat__reciever"),children:[Object(w.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(w.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(w.jsxs)("div",{className:"chat__footer",children:[Object(w.jsx)(M.a,{}),Object(w.jsxs)("form",{children:[Object(w.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)},placeholder:"Type your message",type:"text"}),Object(w.jsx)("button",{onClick:function(e){e.preventDefault(),console.log("You typed >>",n),N.collection("rooms").doc(b).collection("messages").add({message:n,name:I.displayName,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),i("")},type:"submit",children:"Send a message"})]}),Object(w.jsx)(W.a,{})]})]})},G=c(61),J=(c(85),c(104)),U=c(48),z="SET_USER",$=function(e,t){switch(console.log(t),t.type){case z:return Object(U.a)(Object(U.a)({},e),{},{user:t.user});default:return e}};var H=function(){var e=k(),t=Object(r.a)(e,2);Object(G.a)(t[0]);var c=t[1];return Object(w.jsx)("div",{className:"login",children:Object(w.jsxs)("div",{className:"login__container",children:[Object(w.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:""}),Object(w.jsx)("div",{className:"login__text",children:Object(w.jsx)("h1",{children:" Sign In to Whatsapp"})}),Object(w.jsx)(J.a,{onClick:function(){g.signInWithPopup(_).then((function(e){c({type:z,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In With Google"})]})})};var L=function(){var e=k(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(w.jsx)("div",{className:"app",children:c?Object(w.jsx)("div",{className:"app__body",children:Object(w.jsxs)(S.a,{children:[Object(w.jsx)(D,{}),Object(w.jsxs)(P.c,{children:[Object(w.jsx)(P.a,{path:"/rooms/:roomId",children:Object(w.jsx)(T,{})}),Object(w.jsx)(P.a,{path:"/",children:Object(w.jsx)("h1",{children:"Home Screen"})})]})]})}):Object(w.jsx)(H,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(I,{initialState:{user:null},reducer:$,children:Object(w.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[86,1,2]]]);
//# sourceMappingURL=main.a98ef762.chunk.js.map